<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>oneMember</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1">
    <link rel="stylesheet" href="//res.wx.qq.com/open/libs/weui/0.4.2/weui.min.css">
    <link rel="stylesheet" href="/styles/example.css">
    
    <script src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/fancybox2.1.5/source/jquery.fancybox.pack.js?v=2.1.5"></script>
    <script src="/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="/js/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.min.js"></script>
    <script src="//cdn.jsdelivr.net/angular.chartjs/latest/angular-chart.min.js"></script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script src="/controllers/oneMember.js"></script>
  </head>
  <body data-ng-app="oneMember" data-ng-controller="IndexCtrl" orient="portrait" ng-init="init()">
    <div class="container content">
      <div class="weui_tab">
        <div class="weui_tab_bd">
          
          <div class="panel" ng-show="isView('main')">
            <div class="hd">
              <div class="card_title">
                <img width="100%" src="/images/MemberCardImage.jpg" alt="">
              </div>
            </div>
            <div class="bd">
              <div class="weui_panel">
                <div class="weui_panel_bd">
                  <a class="weui_media_box weui_media_appmsg" ng-click="activeMember()">
                    <div class="weui_media_hd">
                      <img ng-src="{{headimgurl}}" class="weui_media_appmsg_thumb">
                    </div>
                    <div class="weui_media_bd">
                      <h4 class="weui_media_title">{{nickname}}</h4>
                      <p class="weui_media_desc" ng-hide="active">未激活</p>
                      <p class="weui_media_desc" ng-show="active">已激活</p>
                    </div>
                  </a>
                  <div class="weui_cells weui_cells_access" style="margin-top: 0px;">
                    <a class="weui_cell"  ng-show="credit">
                      <div class="weui_cell_hd">
                        <img src="http://placehold.it/46x46" style="width:20px;margin-right:5px;display:block">
                      </div>
                      <div class="weui_cell_bd weui_cell_primary">
                        <p>積分</p>
                      </div>
                      <div class="weui_cell_ft">
                        {{credit}}
                      </div>
                    </a>
                    <a class="weui_cell" ng-show="level>=0" ng-click="getLevelUpCredit();pushView('level')">
                      <div class="weui_cell_hd">
                        <img src="http://placehold.it/46x46" style="width:20px;margin-right:5px;display:block">
                      </div>
                      <div class="weui_cell_bd weui_cell_primary">
                        <p>會員等級</p>
                      </div>
                      <div class="weui_cell_ft">
                        {{config.levelsInfo[level].levelName}}
                      </div>
                    </a>
                    <a class="weui_cell" ng-show="validate">
                      <div class="weui_cell_hd">
                        <img src="http://placehold.it/46x46" style="width:20px;margin-right:5px;display:block">
                      </div>
                      <div class="weui_cell_bd weui_cell_primary">
                        <p>到期日</p>
                      </div>
                      <div class="weui_cell_ft">
                        {{validateText(validate)}}
                      </div>
                    </a>
                    <a class="weui_cell" ng-click="pushView('condition')">
                      <div class="weui_cell_hd">
                        <img src="http://placehold.it/46x46" style="width:20px;margin-right:5px;display:block">
                      </div>
                      <div class="weui_cell_bd weui_cell_primary">
                        <p>條款細則</p>
                      </div>
                      <div class="weui_cell_ft">
                      </div>
                    </a>                                   
                  </div>
                </div>
              </div>
            </div>
            <div class="weui_dialog_alert" ng-show="showLoginDialog">
                <div class="weui_mask"></div>
                <div class="weui_dialog">
                    <div class="weui_dialog_hd">
                      <strong class="weui_dialog_title">連續登入奬勵</strong>
                    </div>
                    <div class="weui_dialog_bd">領取今天的登入奬勵</div>
                    <div class="weui_dialog_ft">
                        <a ng-click="redeemLogin()" class="weui_btn_dialog primary">確定</a>
                    </div>
                </div>
            </div>
            <div class="weui_dialog_alert" ng-show="showDialog">
                <div class="weui_mask"></div>
                <div class="weui_dialog">
                    <div class="weui_dialog_hd">
                      <strong class="weui_dialog_title">{{dialog.title}}</strong>
                    </div>
                    <div class="weui_dialog_bd">{{dialog.body}}</div>
                    <div class="weui_dialog_ft">
                        <a ng-click="showDialog=false" class="weui_btn_dialog primary">確定</a>
                    </div>
                </div>
            </div>
          </div>
          <div class="panel" ng-show="isView('active_form')">
            <div class="hd">
              <h1 class="page_title">會員激活</h1>
            </div>
            <div class="bd">
              <div class="weui_cells_title">電話</div>
              <div class="weui_cells weui_cells_form">
                <div class="weui_cell weui_cell_select weui_select_before">
                  <div class="weui_cell_hd">
                    <select class="weui_select" ng-model="profile.countryCode">
                      <option ng-repeat="code in countryCode" value="{{code}}">{{code}}</option>
                    </select>
                  </div>
                  <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="number" ng-model="profile.phone" placeholder="請輸入電話號碼" minlength="8" maxlength="11">
                  </div>
                </div>
              </div>
              <div class="weui_cells_title">電郵</div>
              <div class="weui_cells weui_cells_form">
                <div class="weui_cell">
                  <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="email" ng-model="profile.email" required placeholder="請輸入電郵地址">
                  </div>
                </div>
              </div>
              <div class="weui_cells_title">生日日期</div>
              <div class="weui_cells weui_cells_form">
                <div class="weui_cell">
                  <div class="weui_cell_hd">
                    <label for class="weui_label">生日</label>
                  </div>
                  <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="date" ng-model="profile.birthday" placeholder="yyyy-MM-dd" min="1916-01-01" ng-max="today" required />
                  </div>
                </div>
              </div>
              <div class="weui_btn_area">
                <a href="" class="weui_btn weui_btn_primary" ng-click="applyActive(profile)">激活</a>
              </div>
              <div class="weui_toptips weui_warn js_tooltips" ng-style="tooltipsSytle">格式不符</div>
            </div>
          </div>
          <div class="article" ng-show="isView('level')">
            <div class="hd">
              <h1 class="page_title">會員特權</h1>
            </div>
            <div class="bd">
              <article class="weui_article">
                <section ng-repeat="levelInfo in config.levelsInfo | filter:{enable: true}:false track by $index">
                  <h2>{{levelInfo.levelName}}</h2>
                  <p>特權：{{levelInfo.privilege}}</p>
                  <p ng-hide="$index == 0">{{levelUpText(levelInfo)}}</p>
                  <div class="weui_progress" ng-show="$index == level+1 && levelUpCredit">
                      <div class="weui_progress_bar">
                          <div class="weui_progress_inner_bar" ng-style="levelUpBarStyle(levelInfo.upCredit)"></div>
                          <span class="label label-success">
                            ( {{levelUpCredit}} ／ {{levelInfo.upCredit}} )
                          </span>
                      </div>
                  </div>
                  <hr>
                </section>
              </article>
            </div>
          </div>
          <div class="article" ng-show="isView('condition')">
            <div class="hd">
              <h1 class="page_title">條款細則</h1>
            </div>
            <div class="bd">
              <article class="weui_article">
                <section ng-repeat="sub in conditions track by $index">
                  <p>{{sub}}</p>
                </section>
              </article>
            </div>
          </div>
        </div>
        <div class="weui_tabbar">
            <a href="" class="weui_tabbar_item" ng-class="{weui_bar_item_on: isSelected($index)}" ng-click="selectTab($index)" ng-repeat="name in tabName track by $index">
                <div class="weui_tabbar_icon">
                    <img src="http://placehold.it/56x56" alt="">
                </div>
                <p class="weui_tabbar_label">{{tabLabel($index)}}</p>
            </a>
        </div>
      </div>
    </div>
  </body>
</html>
